<!DOCTYPE html>
<html>
<head><title>登录</title><script src="https://cdn.tailwindcss.com"></script><script src="https://unpkg.com/vue@3/dist/vue.global.js"></script></head>
<body class="bg-slate-100 h-screen flex items-center justify-center">
    <div id="app" class="w-full max-w-md bg-white rounded shadow p-8">
        <h1 class="text-2xl font-bold text-center mb-6">用户登录</h1>
        <form @submit.prevent="login">
            <input type="text" v-model="username" class="mb-4 w-full p-2 border rounded" placeholder="用户名" required>
            <input type="password" v-model="password" class="mb-4 w-full p-2 border rounded" placeholder="密码" required>
            <p v-if="error" class="text-red-500 text-sm mb-4 text-center" v-text="error"></p>
            <button type="submit" class="w-full bg-blue-600 text-white font-bold py-2 rounded">登录</button>
        </form>
        <div class="mt-4 text-center"><a href="/register" class="text-blue-500 text-sm">注册账号</a></div>
    </div>
    <script>
        Vue.createApp({
            data() { return { username: '', password: '', error: '' } },
            methods: {
                async login() {
                    this.error = '';
                    const fd = new FormData(); fd.append('username', this.username); fd.append('password', this.password);
                    try {
                        const res = await fetch('/login', { method: 'POST', body: fd });
                        const data = await res.json();
                        if (data.status === 'success') location.href = '/'; else this.error = data.message;
                    } catch { this.error = '网络错误'; }
                }
            }
        }).mount('#app')
    </script>
</body></html>
root@P7GV0NHTWDP
